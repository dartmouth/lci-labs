---
- hosts: head

  tasks:

  - name: Enable the powertools repo
    ansible.builtin.command:
      cmd: dnf config-manager --set-enabled powertools

  - name: Install dnf packages for head node
    ansible.builtin.dnf:
      name: rpm-build,pam-devel,perl,perl-DBI,openssl-devel,readline-devel,mariadb-devel,python3-PyMySQL
      state: latest

  - name: Enable the ansible module community.myqsl needed for db creation
    ansible.builtin.command:
      cmd: ansible-galaxy collection install community.mysql
